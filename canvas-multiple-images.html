<!doctype html>
<html lang=en>
<head>
<title></title>
<meta charset=utf-8>
</head>
<body>
<script src = http://mrdoob.github.io/three.js/build/three.min.js ></script>
<script src = http://mrdoob.github.io/three.js/examples/js/controls/TrackballControls.js ></script>
<script src = http://mrdoob.github.io/three.js/examples/js/libs/stats.min.js ></script>
<script>
	var renderer, scene, camera, controls, stats;
	var canvas, context;
	// var img1 = new Image(), img2 = new Image(), img3 = new Image(), img4 = new Image();
	var img1;
	var side = 750;
	var s05 = side * 0.5;
	init();
	animate();
	
	var geometry, material, mesh;

	function init() {


		var css = document.body.appendChild( document.createElement('style') );
		css.innerHTML = 'body { font: 600 12pt monospace; margin: 0; overflow: hidden; }';

		var info = document.body.appendChild( document.createElement( 'div' ) );
		info.style.cssText = 'left: 20px; position: absolute; top: 0px; width: 100% ';
		info.innerHTML = '<h1>Canvas Multipl Images<h1><div id=dataDiv></div>';

		stats = new Stats();
		stats.domElement.style.cssText = 'position: absolute; right: 0; top: 0; zIndex: 100; ';
		document.body.appendChild( stats.domElement );

		renderer = new THREE.WebGLRenderer( { alpha: 1, antialias: true, clearColor: 0xffffff }  );
		renderer.setSize( window.innerWidth, window.innerHeight );
		renderer.shadowMapEnabled = true;
		document.body.appendChild( renderer.domElement );
		scene = new THREE.Scene();

		camera = new THREE.PerspectiveCamera( 40, window.innerWidth / window.innerHeight, 1, 1000 );
		camera.position.set( 100, 100, 100 );
		controls = new THREE.TrackballControls( camera, renderer.domElement );

		THREE.ImageUtils.crossOrigin = 'anonymous';
// axes
		scene.add( new THREE.ArrowHelper( v(1, 0, 0), v(0, 0, 0), 30, 0xcc0000) );
		scene.add( new THREE.ArrowHelper( v(0, 1, 0), v(0, 0, 0), 30, 0x00cc00) );
		scene.add( new THREE.ArrowHelper( v(0, 0, 1), v(0, 0, 0), 30, 0x0000cc) );



		var zoom = 7;
		var x = 20;
		var y = 49;


		img1 = document.createElement( 'img' );
		img1.src = 'http://b.tile.openstreetmap.org/' + ( zoom  + 1) + '/' + ( 2 * x ) + '/' + ( 2 * y ) + '.png';
		img1.onload = doIt;

/*
		img2.onload = function() { context.drawImage( img2, s05, 0, s05, s05 ); };
		img2.src = 'http://b.tile.openstreetmap.org/' + ( zoom  + 1) + '/' + ( 2 * x + 1) + '/' + ( 2 * y ) + '.png';

		img3.onload = function() { context.drawImage( img3, 0, s05, s05, s05 ); };
		img3.src = 'http://b.tile.openstreetmap.org/' + ( zoom  + 1) + '/' + ( 2 * x)  + '/' + ( 2 * y + 1 ) + '.png';

		img4.onload = function() { context.drawImage( img4, s05, s05, s05, s05 ); };
		img4.src = 'http://b.tile.openstreetmap.org/' + ( zoom  + 1) + '/' + ( 2 * x +1) + '/' + ( 2 * y + 1) + '.png';



		texture.needsUpdate = true;
// ground plane
		
*/

		// var texture = THREE.ImageUtils.loadTexture( "../../textures/the-scream.jpg" );



	}

	function doIt() {
		var canvas = document.body.appendChild( document.createElement( 'canvas' ) );
		canvas.width = canvas.height = side;
		var context = canvas.getContext( '2d' );

		//context.strokeRect(0, 0, side, side);
		context.drawImage( img1, 0, 0, s05, s05 );

		var texture = new THREE.Texture( img1 );
		texture.needsUpdate = true;

		geometry = new THREE.CubeGeometry( 200, 20, 200 );
		material = new THREE.MeshBasicMaterial( { color: 0xff0000, map: texture } );



		mesh = new THREE.Mesh( geometry, material );
		mesh.position.set( 0, -10, 0 );
		scene.add( mesh );
	}

	function animate() {
		requestAnimationFrame( animate );
		controls.update();
		renderer.render( scene, camera );
		stats.update();
	}

	function v( x, y, z ){ return new THREE.Vector3( x, y, z ); }
</script>
</body>
</html>